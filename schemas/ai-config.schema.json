{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ai-dev-platform/schemas/ai-config.schema.json",
  "title": "AI Platform Configuration",
  "description": "Configuration file for AI platform integration in project repositories",
  "type": "object",
  "additionalProperties": false,
  "required": ["platform", "stack"],
  "properties": {
    "platform": {
      "type": "object",
      "description": "Platform repository reference",
      "properties": {
        "repo": {
          "type": "string",
          "description": "GitHub repository URL or path for the central AI platform",
          "examples": [
            "ai-dev-platform",
            "github.com/mycritters/ai-dev-platform",
            "https://github.com/mycritters/ai-dev-platform"
          ]
        },
        "version": {
          "type": "string",
          "description": "Version, branch, or tag to use from the platform repository",
          "default": "main",
          "examples": ["main", "v1.0.0", "develop"]
        }
      },
      "required": ["repo"]
    },
    "stack": {
      "type": "object",
      "description": "Technology stack configuration for the project",
      "properties": {
        "frontend": {
          "type": "string",
          "enum": ["nextjs", "react", "vue", "svelte", "solid", "angular"],
          "description": "Frontend framework"
        },
        "backend": {
          "type": "string",
          "enum": ["go", "node", "python", "rust", "java", "dotnet"],
          "description": "Backend language/runtime"
        },
        "api": {
          "type": "string",
          "enum": ["graphql", "rest", "grpc", "tRPC"],
          "description": "API architecture style"
        },
        "database": {
          "type": "string",
          "enum": ["postgresql", "mysql", "mongodb", "sqlite", "redis", "dynamodb"],
          "description": "Primary database"
        }
      },
      "required": ["frontend", "backend"]
    },
    "rules": {
      "type": "object",
      "description": "AI agent behavior rules and constraints",
      "properties": {
        "reuseBeforeCreate": {
          "type": "boolean",
          "default": true,
          "description": "Require agents to search for existing code before creating new implementations"
        },
        "requireArchitecturePlan": {
          "type": "boolean",
          "default": true,
          "description": "Require an architecture plan document before feature implementation"
        },
        "requirePlaywrightTests": {
          "type": "boolean",
          "default": true,
          "description": "Require Playwright E2E tests for all feature changes"
        },
        "requireAIReview": {
          "type": "boolean",
          "default": true,
          "description": "Require AI code review before merging"
        },
        "allowBreakingChanges": {
          "type": "boolean",
          "default": false,
          "description": "Whether agents can propose breaking changes without explicit approval"
        }
      }
    },
    "reviewers": {
      "type": "object",
      "description": "Configure which AI reviewers should run for this project",
      "properties": {
        "enabled": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "security-sentinel",
              "performance-oracle",
              "architecture-strategist",
              "data-integrity-guardian",
              "code-simplicity-reviewer",
              "nextjs-reviewer",
              "go-reviewer",
              "graphql-reviewer",
              "playwright-generator"
            ]
          },
          "description": "List of enabled reviewer agents"
        },
        "parallel": {
          "type": "boolean",
          "default": true,
          "description": "Run reviewers in parallel (faster) or sequentially"
        }
      }
    },
    "testing": {
      "type": "object",
      "description": "Testing configuration",
      "properties": {
        "e2e": {
          "type": "string",
          "enum": ["playwright", "cypress", "puppeteer", "selenium"],
          "description": "E2E testing framework",
          "default": "playwright"
        },
        "unit": {
          "type": "string",
          "enum": ["jest", "vitest", "mocha", "pytest", "go-test", "auto"],
          "description": "Unit testing framework (auto-detect if not specified)",
          "default": "auto"
        }
      }
    },
    "ci": {
      "type": "object",
      "description": "CI/CD integration settings",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable CI integration"
        },
        "workflowRef": {
          "type": "string",
          "description": "Git ref for reusable workflows (branch or tag)",
          "default": "main"
        }
      }
    }
  },
  "examples": [
    {
      "platform": {
        "repo": "ai-dev-platform",
        "version": "main"
      },
      "stack": {
        "frontend": "nextjs",
        "backend": "go",
        "api": "graphql",
        "database": "postgresql"
      },
      "rules": {
        "reuseBeforeCreate": true,
        "requireArchitecturePlan": true,
        "requirePlaywrightTests": true,
        "requireAIReview": true
      },
      "reviewers": {
        "enabled": [
          "nextjs-reviewer",
          "go-reviewer",
          "graphql-reviewer",
          "security-sentinel"
        ],
        "parallel": true
      },
      "testing": {
        "e2e": "playwright",
        "unit": "auto"
      },
      "ci": {
        "enabled": true,
        "workflowRef": "main"
      }
    }
  ]
}
